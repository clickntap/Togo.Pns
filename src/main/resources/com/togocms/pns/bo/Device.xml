<?xml version="1.0" encoding="UTF-8"?>
<bean cache="device">
	<read name="id">
		select
		id,
		platform,
		token,
		user_id as "userId",
		channel_id as "channelId"
		from
		pns_device
		where
		id = ${this.id} limit 1
	</read>
	<read name="userId">
		select
		id
		from
		pns_device
		where
		user_id = ${this.userId} limit 1
	</read>
	<read name="token">
		select
		id
		from
		pns_device
		where
		token = ${this.token} limit 1
	</read>
	<execute name="disable">
		update pns_device
		set disabled = 1
		where
		token = ${this.token}
	</execute>
</bean>